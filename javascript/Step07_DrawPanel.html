<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step07_DrawPanel.html</title>
    <style>
        canvas{
            width: 500;
            height: 500;
            border: 5px dashed gray;
            border-radius: 70px;
        }
    </style>
</head>
<body>
    <h1>그림판</h1>
    <canvas id="myCanvas" width="500" height="500" ></canvas>
    <br/>
    <input type="color" id="inputColor"/>
    <input type="line" id="changeline"/>
    <script>
        // canvas 요소의 참조값 얻어오기
        let canvas=document.querySelector("#myCanvas");
        // canvas 에 렌더링 할 수 있는 도구(context) 의 참조값 얻어오기
        let context=canvas.getContext("2d");

        let line="10";
        // 선의 굵기
        context.lineWidth=line;
        // 선의 모서리
        context.lineCap="round";
        // 선의 교차점을 둥글게
        context.lineJoin="round";
        // 선의 색상을 저장할 변수 만들고 "black"으로 초기화
        let color="black";
        // 선의 색상 지정하기
        context.strokeStyle=color;

        // context.beginPath();
        // context.moveTo(250, 0);
        // context.lineTo(0, 500);
        // context.lineTo(500, 150);
        // context.lineTo(0, 150);
        // context.lineTo(500, 500);
        // context.lineTo(250, 0);
        // context.stroke();
        // context.closePath();

        // 현재 그림을 그리고 있는지 여부
        let isDraw=false; // 초기값은 일단 false 로 지정

        document.querySelector("#changeline").addEventListener("change", function(){
            line=this.value;
        });

        document.querySelector("#inputColor").addEventListener("change", function(){
            // color 변수에 현재 value 값을 대입한다.
            
            color=this.value;
        });

        // canvas 에 mousedown 이벤트 처리
        canvas.addEventListener("mousedown", function(event){
            // 그리고 있는 상태로 바꾼다.
            isDraw=true;
            // 이벤트가 일어난 곳의 좌표
            let x=event.offsetX;
            let y=event.offsetY;
            context.beginPath();
            context.moveTo(x,y);
            // 변수에 지정된 값으로 색상 지정
            context.strokeStyle=color;
            context.lineWidth=line;
        });

        // canvas 에 mouseup 이벤트 처리
        canvas.addEventListener("mouseup", function(event){
            // 그리지 않는 상태로 바꾼다.
            isDraw=false;
        });

        // canvas 에 mousemove 이벤트 처리
        canvas.addEventListener("mousemove", function(event){
            // 만일 현재 그림을 그리고 있는 상태일 때
            if (isDraw==true){
                // 이벤트가 일어난 곳의 좌표
                let x=event.offsetX;
                let y=event.offsetY;
                context.lineTo(x,y);
                context.stroke();
            };

        });
    </script>
</body>
</html>